<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FlowRider Trick Progression</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>FlowRider Tricks</h1>
  <p>Click a trick to see how to do it, prerequisites, and a video!</p>
  <input type="text" id="search" placeholder="Search for a trick..." />
</header>

<main>
  <section>
    <h2>ğŸ„â€â™‚ï¸ Bodyboard</h2>
    <div id="bodyboard"></div>
  </section>

  <section>
    <h2>ğŸ‚ Stand-Up</h2>
    <div id="standup"></div>
  </section>
</main>

<script src="data.js"></script>
<script>
const levelColors = {
  "Beginner": "#2ecc71",
  "Lower Intermediate": "#3498db",
  "Intermediate": "#f1c40f",
  "Advanced": "#e67e22",
  "Expert": "#e74c3c",
  "Beginner â†’ Intermediate": "#27ae60",
  "Intermediate â†’ Advanced": "#f39c12"
};

const levelOrder = ["Beginner","Lower Intermediate","Intermediate","Advanced","Expert","Beginner â†’ Intermediate","Intermediate â†’ Advanced"];

function sortTricks(tricks){
  return tricks.sort((a,b)=> levelOrder.indexOf(a.level) - levelOrder.indexOf(b.level));
}

function createButtons(tricks, containerId){
  const container = document.getElementById(containerId);
  container.innerHTML = "";
  const sorted = sortTricks(tricks);
  sorted.forEach(trick => {
    const btn = document.createElement("button");
    btn.textContent = trick.level + " â€“ " + trick.name;
    btn.style.backgroundColor = levelColors[trick.level] || "#1e3d59";
    btn.onclick = () => {
      window.location.href = `trick.html?id=${trick.id}`;
    };
    container.appendChild(btn);
  });
}

createButtons(bodyboardTricks, "bodyboard");
createButtons(standupTricks, "standup");

// SEARCH/FILTER
document.getElementById("search").addEventListener("input", e=>{
  const query = e.target.value.toLowerCase();
  function filter(tricks, containerId){
    const filtered = tricks.filter(t=> t.name.toLowerCase().includes(query));
    createButtons(filtered, containerId);
  }
  filter(bodyboardTricks, "bodyboard");
  filter(standupTricks, "standup");
});
</script>
</body>
</html>
